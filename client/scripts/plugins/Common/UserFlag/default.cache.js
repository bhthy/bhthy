angular.module("getlancerApp.Common.UserFlag",["ngResource","ngSanitize","satellizer","ngAnimate","ui.bootstrap","ui.bootstrap.datetimepicker","ui.router","angular-growl","google.places","angular.filter","ngCookies","angular-md5","ui.select2","http-auth-interceptor","angulartics","pascalprecht.translate","angulartics.google.analytics","tmh.dynamicLocale","ngFileUpload","infinite-scroll","ngTagsInput","angularMoment","bc.Flickity","afkl.lazyImage","angular-loading-bar","ngAnimate","oitozero.ngSweetAlert","ngMessages","slugifier"]),angular.module("getlancerApp.Common.UserFlag").directive("profileViewFlag",function($uibModal,$rootScope){return{restrict:"EA",replace:!0,templateUrl:"scripts/plugins/Common/UserFlag/views/default/users_profile_flag.html",link:function(scope,element,attr){scope.flag={},scope.FlagModel=function(user_id){$rootScope.quote_user_id=user_id,scope.modalInstance=$uibModal.open({templateUrl:"scripts/plugins/Common/UserFlag/views/default/users_flag_model.html",backdrop:"true",controller:"UserFlagController"})}}}}),angular.module("getlancerApp.Common.UserFlag").controller("UserFlagController",["$rootScope","$scope","$stateParams","$state","flash","$uibModal","$uibModalStack","FlagCategoriesFactory","FlagsFactory","$filter",function($rootScope,$scope,$stateParams,$state,flash,$uibModal,$uibModalStack,FlagCategoriesFactory,FlagsFactory,$filter){$scope.user_id=$stateParams.id;$scope.init=function(){$scope.getFlagCategories()},$scope.getFlagCategories=function(){var params={};params.foreign_id=$scope.user_id,params["class"]="User",FlagCategoriesFactory.get(params,function(response){$scope.flagcategories=response.data})},$scope.submit=function(){var params={};$scope.flagform.$valid&&(params.foreign_id=$state.params.id,params.flag_category_id=$scope.flag.flag_category_id,params.message=$scope.flag.message,params["class"]="User",FlagsFactory.create(params,function(response){0===response.error.code&&($scope.is_flag=!0,flash.set($filter("translate")("Flagged successfully."),"success",!1),$state.reload(),$uibModalStack.dismissAll())}))},$scope.closeInstance=function(){$uibModalStack.dismissAll()},$scope.init()}]),angular.module("getlancerApp.Common.UserFlag").factory("FlagsFactory",["$resource",function($resource){return $resource("/api/v1/flags",{},{create:{method:"POST"}})}]).factory("FlagCategoriesFactory",["$resource",function($resource){return $resource("/api/v1/flag_categories",{},{get:{method:"GET"}})}]),angular.module("getlancerApp.Common.UserFlag").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("scripts/plugins/Common/UserFlag/views/default/users_flag_model.html",'<div class="modal-content"> <form ng-submit="submit(flagform.$isvalid)" name="flagform" novalidate> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" ng-click="closeInstance()">&times;</button> <h3 class="no-mar">{{\'Report this User\'|translate}}</h3> </div> <div class="modal-body"> <div class="form-group"> <div class="row"> <label for="inputCategory" class="col-sm-4">{{\'Flag Category\'|translate}} </label> <div class="frm-select col-sm-8"> <select id="inputCategory" name="categoryname" ng-model="flag.flag_category_id" class="form-control" required> <option value="">{{\'Please Select\'|translate}}</option> <option value="{{flagcategory.id}}" ng-repeat="flagcategory in flagcategories">{{flagcategory.name}}</option> </select> </div> <span class="error" ng-show="(flagform.$submitted || flagform.categoryname.$touched) && (flagform.categoryname.$pristine ||\n                    flagform.categoryname.$invalid) && (flagform.categoryname.$error.required)">{{\'Required\'| translate}} </span> </div> </div> <div class="form-group"> <div class="row"> <label for="inputMessage" class="col-sm-4">{{\'Message\'|translate}}<span class="error">&nbsp;*</span></label> <div class="col-sm-8"> <textarea type="text" name="message" ng-model="flag.message" class="form-control" id="inputMessage" ng-required="true"></textarea> <span class="error" ng-show="(flagform.$submitted || flagform.message.$touched) && (flagform.message.$pristine || flagform.message.$invalid) && (flagform.message.$error.required)">{{\'Required\'| translate}} </span> </div> </div> </div> <div class="form-group"> <div class="row"> <div class="col-sm-offset-4 col-sm-8"> <button type="submit" class="btn btn-primary" ng-show="!flag_hide">{{\'Send\'|translate}}</button> <button type="submit" ng-show="flag_hide" class="btn btn-success" disabled>{{\'Send\'|translate}}</button> <button class="btn btn-danger" type="button" ng-click="closeInstance()">{{\'Cancel\'|translate}}</button> </div> </div> </div> </div> </form> </div>'),$templateCache.put("scripts/plugins/Common/UserFlag/views/default/users_profile_flag.html",'<li> <p ng-show="(userprofile.id !== user.id && settings.SITE_ENABLED_PLUGINS.indexOf(\'Common/UserFlag\') > -1)"> <a href="javascript:;" ng-if="isAuth"> <span class="report-link" ng-click="FlagModel(userprofile.id)">{{\'Report this User\'|translate}}?</span> </a> <a href="javascript:;" ng-if="!isAuth"> <span class="report-link" ng-click="openLoginModal(\'login\')">{{\'Report this User\'|translate}}?</span> </a> </p> </li>')}]);