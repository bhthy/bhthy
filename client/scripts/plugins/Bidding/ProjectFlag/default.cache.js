"use strict";angular.module("getlancerApp.Bidding.ProjectFlag",["ngResource","ngSanitize","satellizer","ngAnimate","ui.bootstrap","ui.bootstrap.datetimepicker","ui.router","angular-growl","google.places","angular.filter","ngCookies","angular-md5","ui.select2","http-auth-interceptor","vcRecaptcha","angulartics","pascalprecht.translate","angulartics.google.analytics","tmh.dynamicLocale","ngMap","chieffancypants.loadingBar","payment","ngFileUpload","angularMoment","720kb.socialshare"]),angular.module("getlancerApp.Bidding.ProjectFlag").directive("biddingFlag",function(){return{restrict:"EA",template:'<span class="cursor" ng-click="reportModal()" ng-bind-html=templateBtn> </span>',scope:{classname:"@",foreignid:"@",appendhtml:"@"},controller:function($scope,$rootScope,$state,$filter,flash,$uibModal,$uibModalStack,ReportProjectCategories,ReportProject,$sce){"Project"===$scope.classname?$scope.modeltitle="Report Project":$scope.modeltitle="Report User",void 0!==$scope.appendhtml?$scope.templateBtn=$scope.appendhtml:$scope.templateBtn="Project"===$scope.classname?"Report Project":"Report User",$rootScope.closemodel=function(){$uibModalStack.dismissAll()},$scope.reportModal=function(){$rootScope.project_id=$scope.foreignid,$scope.modalInstance=$uibModal.open({templateUrl:"scripts/plugins/Bidding/Bidding/views/default/bidding_report.html",animation:!1,controller:function($scope,$rootScope,$stateParams,$filter,$state,$uibModal,ReportProjectCategories,ReportProject,flash,flagdatas){$scope.flag=$scope.flags=[],$scope.ReportProjectCategories=function(){var params={};params["class"]="Project",ReportProjectCategories.get(params,function(response){$scope.flag=response.data})},$scope.ReportProjectCategories(),$scope.job_report=!1,$scope.submit=function($valid){if($valid){$scope.job_report=!0;var post_params={foreign_id:flagdatas.foreignid,"class":flagdatas.classname,flag_category_id:$scope.flags.flag_category_id,message:$scope.flags.message},flashMessage="";ReportProject.post(post_params,function(response){$scope.response=response,0===$scope.response.error.code?($scope.flags={},$rootScope.closemodel(),flashMessage=$filter("translate")("Report posted successfully."),flash.set(flashMessage,"success",!1)):(flashMessage=$filter("translate")($scope.response.error.message),flash.set(flashMessage,"error",!1),$scope.job_report=!1)})}}},size:"lg",resolve:{flagdatas:function(){var returnVal={foreignid:$scope.foreignid,classname:$scope.classname};return returnVal}}})}}}}),angular.module("getlancerApp.Bidding.ProjectFlag").factory("ReportProject",["$resource",function($resource){return $resource("/api/v1/flags",{},{get:{method:"GET"},post:{method:"POST"}})}]),angular.module("getlancerApp.Bidding.ProjectFlag").factory("ReportProjectCategories",["$resource",function($resource){return $resource("/api/v1/flag_categories",{},{get:{method:"GET"}})}]),angular.module("getlancerApp.Bidding.ProjectFlag").run(["$templateCache",function($templateCache){$templateCache.put("scripts/plugins/Bidding/ProjectFlag/views/default/bidding_report.html",'<div class="section navbar-default"> <div> <form class="form-horizontal adminpg-form" name="applyJobReport" role="form" novalidate> <div class="row"> <div class="col-sm-12"> <div class="section navbar-default"> <div class="panel" ng-if="!is_flag"> <div class="modal-header sep-bot"> <button type="button" class="close" data-dismiss="modal" ng-click="closemodel()">&times;</button> <h3 class="no-mar">{{\'Report Project\'|translate}}</h3> </div> <div class="panel-heading"> <div class=""> <div class="form-group"> <div class="col-sm-4"> <label for="flagCategory" class="control-label">{{\'Flag Category\'|translate}} <span class="error">*</span> </label> </div> <div class="col-sm-8"> <select name="flagCategory" ng-model="flags.flag_category_id" class="form-control" ng-required="true"> <option value="{{flags.id}}">{{\'Please Select\'|translate}}</option> <option value="{{flags.id}}" ng-repeat="flags in flag">{{flags.name}}</option> </select> <span class="error" ng-if="(applyJobReport.$submitted || applyJobReport.flagCategory.$touched) && (applyJobReport.flagCategory.$pristine || applyJobReport.flagCategory.$invalid) && (applyJobReport.flagCategory.$error.required)">{{\'Required\'| translate}} </span> </div> </div> <div class="form-group"> <div class="col-sm-4"> <label for="message" class="control-label">{{\'Message\'|translate}}<span class="error">*</span></label> </div> <div class="col-sm-8"> <textarea type="text" name="inputMessage" ng-model="flags.message" class="form-control" ng-required="true"></textarea> <span class="error" ng-if="(applyJobReport.$submitted || applyJobReport.inputMessage.$touched) && (applyJobReport.inputMessage.$pristine || applyJobReport.inputMessage.$invalid) && (applyJobReport.inputMessage.$error.required)"> {{\'Required\'| translate }} </span> </div> </div> </div> </div> <div class="panel" ng-if="is_flag">{{\'Already Reported\'|translate}} </div> </div> <div class="panel" ng-if="is_flag"> {{\'Already Reported\'|translate}} </div> <div class="form-group" ng-if="!is_flag"> <div class="col-sm-offset-4 col-sm-8"> <button type="submit" ng-show="job_report" class="btn btn-primary" disabled>{{\'Submit\'|translate}}</button> <button type="submit" class="btn btn-primary" ng-click="submit(applyJobReport.$valid)" ng-show="!job_report"> {{\'Submit\'|translate}}</button> <button class="btn btn-danger" ng-click="closemodel()">{{\'Cancel\'|translate}}</button> </div> </div> <div class="form-group" ng-if="is_flag"> <div class="col-sm-offset-4 col-sm-8"> <button class="btn btn-danger" ng-click="closemodel()">{{\'Cancel\'|translate}}</button> </div> </div> </div> </div> </div> </form> </div> </div>')}]);