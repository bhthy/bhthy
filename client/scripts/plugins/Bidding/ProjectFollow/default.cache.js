"use strict";angular.module("getlancerApp.Bidding.ProjectFollow",["ngResource","ngSanitize","satellizer","ngAnimate","ui.bootstrap","ui.bootstrap.datetimepicker","ui.router","angular-growl","google.places","angular.filter","ngCookies","angular-md5","ui.select2","http-auth-interceptor","vcRecaptcha","angulartics","pascalprecht.translate","angulartics.google.analytics","tmh.dynamicLocale","ngMap","chieffancypants.loadingBar","payment","ngFileUpload","angularMoment","720kb.socialshare"]),angular.module("getlancerApp.Bidding.ProjectFollow").controller("ProjectFollowController",["$scope","$rootScope","$stateParams","flash","$filter","$state","BookMarkProject","md5","$timeout",function($scope,$rootScope,$stateParams,flash,$filter,$state,BookMarkProject,md5,$timeout){$scope.$on("showisbook",function(event,data){$scope.is_book=data.isbook,$scope.foreignid=data.projectid}),$scope.projectBookmark=function(){var flashMessage="";$timeout(function(){BookMarkProject.post({foreign_id:$scope.foreignid,"class":$scope.classname},function(response){0===response.error.code?($rootScope.book_id=response.id,$scope.is_book=!0,flashMessage=$filter("translate")("Project bookmarked successfully"),flash.set(flashMessage,"success",!1)):(flashMessage=$filter("translate")(response.error.message),flash.set(flashMessage,"error",!1)),$state.go("Bid_ProjectView",{},{reload:!0})})},1e3)},$scope.projectUnBookmark=function(book_id){var flashMessage="";$timeout(function(){if(null!==$rootScope.user&&void 0!==$rootScope.user){var params={};params.id=$rootScope.book_id,BookMarkProject["delete"]({id:$rootScope.book_id},function(response){0===response.error.code?($rootScope.book_id=0,$scope.is_book=!1,flashMessage=$filter("translate")("Project unbookmarked successfully."),flash.set(flashMessage,"success",!1)):(flashMessage=$filter("translate")(response.error.message),flash.set(flashMessage,"error",!1)),$state.go("Bid_ProjectView",{},{reload:!0})})}},1e3)}}]),angular.module("getlancerApp.Bidding.ProjectFollow").directive("bookmarkFollow",function(){return{restrict:"EA",templateUrl:"scripts/plugins/Bidding/ProjectFollow/views/default/project_follow.html",scope:{classname:"@"},controller:"ProjectFollowController"}}),angular.module("getlancerApp.Bidding.ProjectFollow").factory("BookMarkProject",["$resource",function($resource){return $resource("/api/v1/followers/:id",{},{post:{method:"POST"},"delete":{method:"DELETE"}})}]),angular.module("getlancerApp.Bidding.ProjectFollow").run(["$templateCache",function($templateCache){$templateCache.put("scripts/plugins/Bidding/ProjectFollow/views/default/project_follow.html",'<div ng-show="!is_book"> <div title="Bookmark this project" class="project-bookmark cursor" ng-click="projectBookmark()" ng-class="{\'active\': is_book}"> <span class="bookmark-circle"></span> </div> </div> <div ng-show="is_book"> <div title="Unbookmark" class="project-bookmark cursor" ng-click="projectUnBookmark(book_id)" ng-class="{\'active\': is_book}"> <span class="bookmark-circle"></span> </div> </div>')}]);