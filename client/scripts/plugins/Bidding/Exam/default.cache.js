"use strict";angular.module("getlancerApp.Bidding.Exam",["getlancerApp.Bidding.Constant","ngResource","ngSanitize","satellizer","ngAnimate","ui.bootstrap","ui.bootstrap.datetimepicker","ui.router","angular-growl","google.places","angular.filter","ngCookies","angular-md5","ui.select2","http-auth-interceptor","angulartics","pascalprecht.translate","angulartics.google.analytics","tmh.dynamicLocale","ngFileUpload","infinite-scroll","ngTagsInput","angularMoment","bc.Flickity","afkl.lazyImage","angular-loading-bar","ngAnimate","oitozero.ngSweetAlert","slugifier","checklist-model","angularjs-dropdown-multiselect","rzModule"]).config(function($stateProvider,$urlRouterProvider){var getToken={TokenServiceData:function(TokenService,$q){return $q.all({AuthServiceData:TokenService.promise,SettingServiceData:TokenService.promiseSettings})}};$urlRouterProvider.otherwise("/"),$stateProvider.state("Exam",{url:"/exams?q&page",templateUrl:"scripts/plugins/Bidding/Exam/views/default/exams.html",controller:"ExamListCtrl",resolve:getToken}).state("MyExams",{url:"/exams/my_attempts",templateUrl:"scripts/plugins/Bidding/Exam/views/default/my_exams.html",controller:"MyExamController",resolve:getToken}).state("ExamCertified",{url:"/exams/my_attempts/status/certified",templateUrl:"scripts/plugins/Bidding/Exam/views/default/my_exams.html",controller:"MyExamController",resolve:getToken}).state("Exam_Payment",{url:"/exams/order/:id",templateUrl:"scripts/plugins/Bidding/Exam/views/default/exam_payment.html",controller:"ExamPaymentController",resolve:getToken}).state("ExamStart",{url:"/exams/start/:id",templateUrl:"scripts/plugins/Bidding/Exam/views/default/exam_start.html",controller:"ExamStartController",resolve:getToken}).state("OnlineTest",{url:"/exams/online_test/:id",templateUrl:"scripts/plugins/Bidding/Exam/views/default/exam_online.html",controller:"ExamOnlineTestCtrl",resolve:getToken}).state("ExamResult",{url:"/exams/result/:id",templateUrl:"scripts/plugins/Bidding/Exam/views/default/exam_result.html",controller:"ExamResultController",resolve:getToken}).state("ExamView",{url:"/exams/:id/:slug",templateUrl:"scripts/plugins/Bidding/Exam/views/default/exam_view.html",controller:"ExamViewCtrl",resolve:getToken})}),angular.module("getlancerApp.Bidding.Exam").controller("ExamListCtrl",function($scope,$rootScope,$state,$filter,$location,flash,Exams,md5){$rootScope.header=$rootScope.settings.SITE_NAME+" | "+$filter("translate")("Skills Lab"),$scope.params={},void 0!==$state.params.q&&($scope.params.q=$state.params.q),$scope.index=function(){$scope.loader=!0,$scope.params.limit=21,$scope.params.page=$scope.currentPage,Exams.get($scope.params,function(response){0===parseInt(response.error.code)&&(angular.isDefined(response._metadata)&&($scope.currentPage=response._metadata.current_page,$scope.totalItems=response._metadata.total,$scope.itemsPerPage=response._metadata.per_page,$scope.noOfPages=response._metadata.last_page),angular.isDefined(response.data)?($scope.exams=response.data,angular.forEach($scope.exams,function(value){angular.isDefined(value.attachment)&&null!=value.attachment?value.logo_url="images/small_normal_thumb/"+value.attachment["class"]+"/"+value.attachment.foreign_id+"."+md5.createHash(value.attachment["class"]+value.attachment.foreign_id+"pngsmall_normal_thumb")+".png":value.logo_url="images/no-image.png"})):($scope.exams="",$scope.errorMessage="",angular.isDefined(response.error)&&($scope.errorMessage=response.error.message),$scope.currentPage=0,$scope.totalItems=0,$scope.itemsPerPage=0,$scope.noOfPages=0))},function(error){console.log("Exam Get",error)}),$scope.loader=!1},$scope.refinesearch=function(qVal){qVal?($scope.params.q=qVal,$state.go("Exam",{q:qVal})):$state.go("Exam")},$scope.paginate=function(){$scope.currentPage=parseInt($scope.currentPage),$scope.index()},$scope.index()}).controller("ExamViewCtrl",function($scope,$rootScope,$state,$filter,$location,flash,ExamsView,PerDayExam,ExamStatus,ExamUser,md5,$cookies){$scope.PerDayLimit=PerDayExam.NumOfTime,$scope.ExamStatus=ExamStatus;var flashMessage="",params={};ExamsView.get({id:$state.params.id},function(response){if(0===parseInt(response.error.code)){$scope.show_response_page=!0,$scope.examValue=response.data,$scope.str=$scope.examValue.instructions.replace("##QUESTION_COUNT##",$scope.examValue.exams_question_count).replace("##EXAM_DURATION##",$scope.examValue.duration),$scope.topics_covered=$scope.examValue.topics_covered,angular.isDefined($scope.examValue.attachment)&&(null!==$scope.examValue.attachment?$scope.examValue.logo_url="images/big_thumb/"+$scope.examValue.attachment["class"]+"/"+$scope.examValue.attachment.foreign_id+"."+md5.createHash($scope.examValue.attachment["class"]+$scope.examValue.attachment.foreign_id+"pngbig_thumb")+".png":$scope.examValue.logo_url="images/no-image.png");var noAttempt=0,passedCount=0,Inprogress=0,Incomplete=0,FeePaidOrNotStarted=0,SuspendedDueToTakingOvertime=0,Failed=0;angular.forEach($scope.examValue.ExamsUser,function(value){noAttempt+=value.no_of_times,value.exam_status_id==ExamStatus.Passed?passedCount+=1:value.exam_status_id==ExamStatus.Inprogress?Inprogress+=1:value.exam_status_id==ExamStatus.Incomplete?Incomplete+=1:value.exam_status_id==ExamStatus.FeePaidOrNotStarted?FeePaidOrNotStarted+=1:value.exam_status_id==ExamStatus.SuspendedDueToTakingOvertime?SuspendedDueToTakingOvertime+=1:value.exam_status_id==ExamStatus.Failed&&(Failed+=1)}),$scope.passedCount=passedCount,$scope.Inprogress=Inprogress,$scope.Incomplete=Incomplete,$scope.FeePaidOrNotStarted=FeePaidOrNotStarted,$scope.SuspendedDueToTakingOvertime=SuspendedDueToTakingOvertime,$scope.Failed=Failed,$scope.examAttempts=noAttempt;var parentpassCount=0;0!==$scope.examValue.parent.length&&(angular.forEach($scope.examValue.parent[0].parent_exams_users,function(parentvalue){parentvalue.exam_status_id==ExamStatus.Passed&&(parentpassCount+=1)}),$scope.parentpassCount=parentpassCount)}},function(error){}),$scope.exam_users=function(value){params.exam_id=value,$cookies.put("exam_id",JSON.stringify(value)),ExamUser.post(params,function(response){0===response.error.code?response.data.exam_status_id==ExamStatus.ExamFeePaymentPending?($rootScope.exam_id=response.data.exam_id,$state.go("Exam_Payment",{id:response.data.id},{reload:!0})):response.data.exam_status_id==ExamStatus.FeePaidOrNotStarted&&$state.go("ExamStart",{id:response.data.id},{reload:!0}):(flashMessage=$filter("translate")(response.error.message),flash.set(flashMessage,"error",!1))})}}).controller("ExamStartController",function($scope,$rootScope,$state,$filter,$location,flash,ExamStart,$window){ExamStart.get({id:$state.params.id},function(response){0===parseInt(response.error.code)&&($scope.exam_start=response.data,$scope.str=$scope.exam_start.exam.splash_content.replace("##QUESTION_COUNT##",$scope.exam_start.exam.exams_question_count).replace("##EXAM_DURATION##",$scope.exam_start.exam.duration))},function(error){}),$scope.examStart=function(examId){$state.go("OnlineTest",{id:examId})}}).controller("MyExamController",function($scope,$rootScope,$state,$filter,$location,flash,MyExam,$window){function index(){$scope.id="MyExams"==$state.current.name?4:3,MyExam.get({exam_status_id:$scope.id},function(response){0===parseInt(response.error.code)&&($scope.myExams=response.data)},function(error){})}index(),$scope.filter=function(value){3===parseInt(value)?$state.go("ExamCertified"):$state.go("MyExams")}}).controller("ExamOnlineTestCtrl",function($scope,$rootScope,$state,$filter,$location,flash,ExamStart,$cookies,QuestionAnswer,SweetAlert,$timeout,$interval,$window){$scope.startautoCall=0,$scope.stopautoCall=0,$scope.questionAnswer=[],$scope.tmp_skills=[];var flashMessage="";$scope.milisecondsDiff=0,$scope.currentPage=void 0!==$cookies.get("exampage")?parseInt($cookies.get("exampage")):0,0===$scope.currentPage?$cookies.put("exampage",0,{path:"/"}):$scope.is_show_previous=!0,void 0!==$cookies.get("examValue")&&($scope.tmp_skills=JSON.parse($cookies.get("examValue"))),parseInt($scope.currentPage)<9?$scope.is_show_next=!0:$scope.is_show_next=!1,ExamStart.get({id:$state.params.id,is_exam_started:1},function(response){function shuffle(array){if($scope.exam_data){if(1===$scope.exam_data.exam_status_id){for(var temporaryValue,randomIndex,currentIndex=array.length;0!==currentIndex;)randomIndex=Math.floor(Math.random()*currentIndex),currentIndex-=1,temporaryValue=array[currentIndex],array[currentIndex]=array[randomIndex],array[randomIndex]=temporaryValue;return array}for(var temporaryValue,currentIndex=array.length;0!==currentIndex;)randomIndex=Math.floor(currentIndex),currentIndex-=0,temporaryValue=array[currentIndex],array[currentIndex]=array[randomIndex],array[randomIndex]=temporaryValue;return array}}if(0===parseInt(response.error.code)){$scope.exam_data=response.data,$timeout(function(){$scope.accessTimeOut=!0},1e3),$scope.intervalFunction(),$scope.callfailure=!1;$scope.questionArray=shuffle($scope.exam_data.Question)}else flashMessage=$filter("translate")(response.error.message),flash.set(flashMessage,"error",!1),$state.go("Exam");$scope.exam_data&&(1===$scope.exam_data.exam_status_id?$scope.milisecondsDiff=6e4*($scope.exam_data.allow_duration-$scope.exam_data.taken_time):($scope.milisecondsDiff=$window.localStorage.getTime,$window.localStorage.removeItem("getTime"))),$timeout(function(){$scope.timerStop=!1,$scope.timerStop===!0&&(flashMessage=$filter("translate")("Your time is out"),flash.set(flashMessage,"success",!1)),$scope.answercall={},$scope.answercall.user_answer=$scope.user_answer,$scope.answercall.exams_user_id=parseInt($state.params.id),$scope.answercall.is_exam_completed=1,QuestionAnswer.post($scope.answercall,function(response){0===response.error.code?(flashMessage=$filter("translate")("Your exam is successfully completed"),flash.set(flashMessage,"success",!1),$scope.stopautoCall=1,$state.go("ExamResult",{id:$state.params.id})):(flashMessage=$filter("translate")(response.error.message),flash.set(flashMessage,"error",!1))})},$scope.milisecondsDiff),$scope.timerStop=!0,$scope.timerId=$interval(function(){$scope.timerStop===!0&&($scope.milisecondsDiff<=0||($scope.timeLeft=$scope.getRemainTimeFormat($scope.milisecondsDiff),$(".js-time-display").html($scope.timeLeft+""),$scope.milisecondsDiff=$scope.milisecondsDiff-1e3))},1e3)},function(error){console.log(error)}),window.onbeforeunload=function(event){var hms=$scope.timeLeft,a=hms.split(":"),seconds=60*+a[0]*60+60*+a[1]+ +a[2];$scope.timevalue=1e3*seconds,$scope.reloadresponse=$scope.timevalue;var message="Sure you want to leave?";return"undefined"==typeof event&&(event=window.event),event&&(event.returnValue=message),message},$scope.prevQuestion=function(){Object.keys($scope.questionArray).length>0&&($scope.currentPage=parseInt($scope.currentPage)-1===0?0:parseInt($scope.currentPage)-1,$cookies.put("exampage",$scope.currentPage,{path:"/"}),0===parseInt($scope.currentPage)?($scope.is_show_previous=!1,$scope.is_show_next=!0):($scope.is_show_next=!0,$scope.is_show_previous=!0))},$scope.nextQuestion=function(){Object.keys($scope.questionArray).length>0&&($scope.currentPage=parseInt($scope.currentPage)+1>Object.keys($scope.questionArray).length?Object.keys($scope.questionArray).length-1:$scope.currentPage+1,$cookies.put("exampage",$scope.currentPage,{path:"/"}),Object.keys($scope.questionArray).length===$scope.currentPage+1?$scope.is_show_next=!1:($scope.is_show_next=!0,$scope.is_show_previous=!0))},$scope.user_answer=[],$scope.choosedAnswer=function(qid,ansvalue,$index){$scope.exams_user_id=parseInt($state.params.id),$scope.answer={question_id:qid,answer:ansvalue},0!==$scope.user_answer.length?angular.forEach($scope.user_answer,function(value,key){parseInt(value.question_id)===parseInt(qid)?$scope.user_answer.splice(key,1):$scope.pushvalue=!0}):$scope.user_answer.push($scope.answer),$scope.pushvalue===!0&&$scope.user_answer.push($scope.answer),$scope.autoCallanswer()},$scope.submit=function(){SweetAlert.swal({title:$filter("translate")("Are you sure you want to complete this exam?"),type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"OK",cancelButtonText:"Cancel",closeOnConfirm:!0,animation:!1},function(isConfirm){isConfirm&&($scope.timerStop=!0,$scope.answercall={},$scope.answercall.user_answer=$scope.user_answer,$scope.answercall.exams_user_id=parseInt($state.params.id),$scope.answercall.is_exam_completed=1,QuestionAnswer.post($scope.answercall,function(response){0===response.error.code?(flashMessage=$filter("translate")("Your exam is successfully completed"),$scope.stopautoCall=1,flash.set(flashMessage,"success",!1),$state.go("ExamResult",{id:$state.params.id})):(flashMessage=$filter("translate")(response.error.message),flash.set(flashMessage,"error",!1))}))})},$scope.autoCallanswer=function(){$scope.answercall={},$scope.answercall.user_answer=$scope.user_answer,$scope.answercall.exams_user_id=parseInt($state.params.id),QuestionAnswer.post($scope.answercall,function(response){0===response.error.code})},$scope.autoCallanswers=function(){$scope.answercall={},$scope.user_answers=[],$scope.answercall.user_answer=$scope.user_answers,$scope.answercall.exams_user_id=parseInt($state.params.id||0),0!==$scope.answercall.exams_user_id&&QuestionAnswer.post($scope.answercall,function(response){0===response.error.code?($scope.callfailure=!1,$scope.intervalFunction(),console.log("Auto call success")):($scope.callfailure=!0,console.log("Auto call failure"))})},$scope.intervalFunction=function(){$timeout(function(){$scope.callfailure===!1&&void 0!==$scope.callfailure&&0===$scope.stopautoCall&&$scope.autoCallanswers()},5e3)},$scope.getRemainTimeFormat=function($milisecondsDiff){return Math.floor($milisecondsDiff/36e5).toLocaleString(void 0,{minimumIntegerDigits:2})+":"+(Math.floor($milisecondsDiff/6e4)%60).toLocaleString(void 0,{minimumIntegerDigits:2})+":"+(Math.floor($milisecondsDiff/1e3)%60).toLocaleString(void 0,{minimumIntegerDigits:2})}}).controller("ExamResultController",function($scope,$rootScope,$state,$filter,$location,flash,ExamStart,$window,$timeout){function examStart(){ExamStart.get({id:$state.params.id},function(response){0===parseInt(response.error.code)&&($scope.exam_data=response.data,$timeout(function(){$scope.accessTimeOut=!0},1e3))},function(error){console.log(error)})}examStart()}),angular.module("getlancerApp.Bidding.Exam").controller("ExamPaymentController",function($rootScope,$scope,$window,countries,states,cities,$stateParams,usersAddresses,wallet,flash,$location,$filter,$state,paymentGateways,userSettings,ConstPaymentGateways,ProjectEditView,UserMeFactory,ExamsPayment,ExamsView,$cookies,md5){$scope.exam_id=JSON.parse($cookies.get("exam_id")),$rootScope.header=$rootScope.settings.SITE_NAME+" | "+$filter("translate")("Confirm your Payment"),ExamsView.get({id:$scope.exam_id},function(response){0===parseInt(response.error.code)&&($scope.examValue=response.data,$scope.plan_info.price_final=$scope.examValue.fee),angular.isDefined($scope.examValue.attachment)&&(null!==$scope.examValue.attachment?$scope.examValue.logo_url="images/big_thumb/"+$scope.examValue.attachment["class"]+"/"+$scope.examValue.attachment.foreign_id+"."+md5.createHash($scope.examValue.attachment["class"]+$scope.examValue.attachment.foreign_id+"pngbig_thumb")+".png":$scope.examValue.logo_url="images/no-image.png")}),$scope.minimum_wallet_amount=$rootScope.settings.WALLET_MIN_WALLET_AMOUNT,$scope.maximum_wallet_amount=$rootScope.settings.WALLET_MAX_WALLET_AMOUNT,$scope.buyer={},$scope.plan={},$scope.paynow_is_disabled=!1,$scope.payment_note_enabled=!1,$scope.payer_form_enabled=!0,$scope.is_wallet_page=!0,$scope.plan_info={},$scope.save_btn=!1,$scope.first_gateway_id="",$scope.index=function(){$scope.loader=!0,$scope.payment=!0,UserMeFactory.get({},function(response){$scope.user_available_balance=response.data.available_wallet_amount,0===parseInt($scope.user_available_balance)?$scope.is_show_wallet_paybtn=!1:$scope.is_show_wallet_paybtn=!0});var payment_gateways=[];paymentGateways.get({},function(payment_response){if(payment_response.wallet&&($scope.wallet_enabled=!0),payment_response.PayPalREST){var response=payment_response.PayPalREST;response.paypalrest_enabled&&($scope.paypal_enabled=!0)}$scope.group_gateway_id="",0===payment_response.error.code&&(void 0!==payment_response.zazpay&&1!==payment_response.zazpay.error.code?(angular.forEach(payment_response.zazpay.gateways,function(gateway_group_value,gateway_group_key){0===gateway_group_key&&($scope.group_gateway_id=gateway_group_value.id,$scope.first_gateway_id=gateway_group_value.id),angular.forEach(gateway_group_value.gateways,function(payment_geteway_value,payment_geteway_key){var payment_gateway={},suffix="sp_";0===gateway_group_key&&($scope.sel_payment_gateway="sp_"+payment_geteway_value.id),suffix+=payment_geteway_value.id,payment_gateway.id=payment_geteway_value.id,payment_gateway.payment_id=suffix,payment_gateway.group_id=gateway_group_value.id,payment_gateway.display_name=payment_geteway_value.display_name,payment_gateway.thumb_url=payment_geteway_value.thumb_url,payment_gateway.suffix=payment_geteway_value._form_fields._extends_tpl.join(),payment_gateway.form_fields=payment_geteway_value._form_fields._extends_tpl.join(),payment_gateway.instruction_for_manual=payment_geteway_value.instruction_for_manual,payment_gateways.push(payment_gateway)})}),$scope.gateway_groups=payment_response.zazpay.gateways,$scope.payment_gateways=payment_gateways,$scope.form_fields_tpls=payment_response.zazpay._form_fields_tpls,$scope.show_form=[],$scope.form_fields=[],angular.forEach($scope.form_fields_tpls,function(key,value){"buyer"===value&&($scope.form_fields[value]="views/buyer.html"),"credit_card"===value&&($scope.form_fields[value]="views/credit_card.html"),"manual"===value&&($scope.form_fields[value]="views/manual.html"),$scope.show_form[value]=!0}),$scope.gateway_id=ConstPaymentGateways.ZazPay):response.paypalrest_enabled&&($scope.gateway_id=ConstPaymentGateways.PayPal)),$scope.loader=!1})},$scope.applyCoupon=function(){var params={};params.coupon_code=$scope.plan.coupon,params.amount=$scope.examValue.Exam.zazpay_revised_amount,CouponGetStatusFactory.get(params,function(response){if($scope.discountCoupon=response,0===response.error.code)if($scope.discountCoupon.data.discount_type_id==ConstDiscountType.Amount)$scope.plan_info.price_final=parseFloat($scope.examValue.Exam.zazpay_revised_amount)-parseFloat(response.data.discount),$scope.show_discount=$filter("currency")(response.data.discount);else{var discount_amt=response.data.discount/100*$scope.examValue.Exam.zazpay_revised_amount;$scope.plan_info.price_final=$scope.examValue.Exam.zazpay_revised_amount-discount_amt,$scope.show_discount=$filter("translate")(response.data.discount+"%")}else flash.set($filter("translate")(response.error.message),"error",!1),$scope.plan.coupon=""})},$scope.ClearCoupon=function(){$scope.plan_info.price_final=$scope.examValue.Exam.zazpay_revised_amount,$scope.purchase_plan_coupon=!1,$scope.show_discount=!1},$scope.paneChanged=function(pane){"Manual / Offline"===pane&&($scope.payment_note_enabled=!0);var keepGoing=!0;$scope.buyer={},$scope.PaymentForm.$setPristine(),$scope.PaymentForm.$setUntouched(),angular.forEach($scope.form_fields_tpls,function(key,value){$scope.show_form[value]=!1}),$scope.gateway_id=ConstPaymentGateways.ZazPay,angular.forEach($scope.gateway_groups,function(res){if(res.display_name===pane&&"Wallet"!==pane){var selPayment="";angular.forEach($scope.payment_gateways,function(response){keepGoing&&response.group_id===res.id&&(selPayment=response,keepGoing=!1,$scope.rdoclick(selPayment.id,selPayment.form_fields))}),$scope.sel_payment_gateway="sp_"+selPayment.id,$scope.group_gateway_id=selPayment.group_id}}),"Wallet"===pane&&($scope.gateway_id=ConstPaymentGateways.Wallet),"paypal"===pane&&($scope.gateway_id=ConstPaymentGateways.PayPal)},$scope.rdoclick=function(res,res1){$scope.paynow_is_disabled=!1,$scope.sel_payment_gateway="sp_"+res,$scope.array=res1.split(","),angular.forEach($scope.array,function(value){$scope.show_form[value]=!0})},$scope.PaymentFormSubmit=function(form){var payment_id="";if($scope.sel_payment_gateway&&$scope.gateway_id===ConstPaymentGateways.ZazPay&&(payment_id=$scope.sel_payment_gateway.split("_")[1]),$scope.buyer.payment_gateway_id=$scope.gateway_id,$scope.buyer.gateway_id=payment_id,$scope.buyer.foreign_id=$state.params.id,$scope.buyer["class"]="ExamsUser",$scope.buyer.coupon_code=$scope.plan.coupon,angular.isDefined($scope.buyer.credit_card_expired)&&($scope.buyer.credit_card_expired.month||$scope.buyer.credit_card_expired.year)&&($scope.buyer.credit_card_expire=$scope.buyer.credit_card_expired.month+"/"+$scope.buyer.credit_card_expired.year),form){$scope.paynow_is_disabled=!0;var flashMessage;if(parseFloat($scope.plan_info.price_final)>parseFloat($scope.user_available_balance)&&$scope.gateway_id===ConstPaymentGateways.Wallet)return flashMessage=$filter("translate")("Your wallet has insufficient money."),flash.set(flashMessage,"error",!1),$scope.paynow_is_disabled=!1,!0;ExamsPayment.create($scope.buyer,function(response){0===response.error.code?void 0!==response.redirect_url?$window.location.href=response.redirect_url:void 0!==response.data.gateway_callback_url?$window.location.href=response.data.gateway_callback_url:"Pending"===response.data.status?(flashMessage=$filter("translate")("Your request is in pending."),flash.set(flashMessage,"error",!1),$state.reload()):"Captured"===response.data.status?(flashMessage=$filter("translate")("Amount added successfully."),flash.set(flashMessage,"success",!1),$state.go("ExamStart",{id:response.data.id})):0===response.error.code?("Captured"===response.payment_response.status&&($scope.my_user.available_wallet_amount=$scope.my_user.available_wallet_amount-parseInt(response.data.fee_paid)),flashMessage=$filter("translate")("Payment successfully completed."),flash.set(flashMessage,"success",!1),$state.go("ExamStart",{id:response.data.id})):512===response.error.code&&(flashMessage=$filter("translate")("Process Failed. Please, try again."),flash.set(flashMessage,"error",!1)):(flashMessage=$filter("translate")("We are unable to process your request. Please try again."+response.error.message),flash.set(flashMessage,"error",!1)),$scope.paynow_is_disabled=!1},function(error){(angular.isDefined(error.data.error.message)||null!==error.data.error.message)&&flash.set($filter("translate")(error.data.error.message),"error",!1),$scope.paynow_is_disabled=!1})}},$scope.payNowPayPalClick=function(){var flashMessage;$scope.buyer.payment_gateway_id=$scope.gateway_id,$scope.buyer.gateway_id=$scope.buyer.payment_gateway_id,$scope.buyer.foreign_id=$state.params.id,$scope.buyer["class"]="ExamsUser",$scope.paynow_is_disabled=!0,ExamsPayment.create($scope.buyer,function(response){0===response.error.code?void 0!==response.redirect_url?$window.location.href=response.redirect_url:void 0!==response.data.gateway_callback_url?$window.location.href=response.data.gateway_callback_url:"Pending"===response.data.status?(flashMessage=$filter("translate")("Your request is in pending."),flash.set(flashMessage,"error",!1),$state.reload()):"Captured"===response.data.status?(flashMessage=$filter("translate")("Amount added successfully."),flash.set(flashMessage,"success",!1),$state.go("ExamStart",{id:response.data.id})):0===response.error.code?("Captured"===response.payment_response.status&&($scope.my_user.available_wallet_amount=$scope.my_user.available_wallet_amount-parseInt(response.data.total_listing_fee)),flashMessage=$filter("translate")("Payment successfully completed."),flash.set(flashMessage,"success",!1),$state.go("ExamStart",{id:response.data.id})):512===response.error.code&&(flashMessage=$filter("translate")("Process Failed. Please, try again."),flash.set(flashMessage,"error",!1)):(flashMessage=$filter("translate")("We are unable to process your request. Please try again."+response.error.message),flash.set(flashMessage,"error",!1)),$scope.paynow_is_disabled=!1},function(error){(angular.isDefined(error.data.error.message)||null!==error.data.error.message)&&flash.set($filter("translate")(error.data.error.message),"error",!1),$scope.paynow_is_disabled=!1})},countries.get({limit:"all"},function(response){angular.isDefined(response.data)&&($scope.countries=response.data)}),$scope.index()}),angular.module("getlancerApp.Bidding.Exam").factory("Exams",["$resource",function($resource){return $resource("/api/v1/exams",{},{get:{method:"GET"}})}]).factory("ExamsView",["$resource",function($resource){return $resource("/api/v1/exams/:id",{},{get:{method:"GET"}})}]).factory("ExamsPayment",["$resource",function($resource){return $resource("/api/v1/order",{},{create:{method:"POST"}})}]).factory("ExamStart",["$resource",function($resource){return $resource("/api/v1/exams_users/:id",{},{get:{method:"GET"}})}]).factory("MyExam",["$resource",function($resource){return $resource("/api/v1/me/exams_users",{},{get:{method:"GET"}})}]).factory("QuestionAnswer",["$resource",function($resource){return $resource("/api/v1/exam_answers",{},{post:{method:"POST"}})}]).factory("ExamUser",["$resource",function($resource){return $resource("/api/v1/exams_users",{},{post:{method:"POST"}})}]),angular.module("getlancerApp.Bidding.Exam").run(["$templateCache",function($templateCache){$templateCache.put("scripts/plugins/Bidding/Exam/views/default/exam_online.html",'<div class="section photo-view online-exam" prevent-right-click> <div class="container" ng-if="exam_data.user_id == user.id"> <h2 class="head-bot">{{exam_data.exam.title}} - {{exam_data.exam.exam_level.name}} </h2> <div ng-show="exam_data.exam_status_id == 1"> <div class="clearfix panel panel-default online-head"> <div class="col-sm-2"> <span class="js-time-display btn btn-primary"></span> </div> <ul class="list-inline col-sm-3"> <li ng-repeat="questionName in questionArray"> <a ng-class="(!questionName.exam_answer.user_answer)? \'btn btn-warning\' : \'btn btn-primary\'">{{$index +1 }}</a> </li> </ul> <div class="col-sm-2 navbar-right"> <div> <a class="btn btn-primary"></a> {{\'Attempted\' | translate}} </div> <div> <a class="btn btn-warning"></a> {{\'Not attempted\' | translate}} </div> </div> </div> <div id="question"> <div ng-show="exam_data.exam.question_display_type_id == 2"> <h2>{{\'Question #\'|translate}}{{currentPage + 1}}</h2> <div class="panel panel-default"> <div class="panel-heading"> {{questionArray[currentPage].question}} </div> <div class="panel-body"> <div class="anser-options" ng-repeat="question in questionArray[currentPage].question_answer_options"> <label class="rad"> <input type="radio" name="answer" value="{{question.option}}" ng-model="questionArray[currentPage].exam_answer.user_answer" ng-click="choosedAnswer(questionArray[currentPage].id, question.option)"> {{question.option}} </label> </div> </div> </div> <a class="text-center btn btn-primary bot-mspace" ng-click="prevQuestion()" ng-if="is_show_previous">{{\'Prev\' | translate}}</a> <a class="btn btn-primary text-right bot-mspace" ng-click="nextQuestion()" ng-if="is_show_next">{{\'Next\' | translate}}</a> </div> </div> <div ng-show="exam_data.exam.question_display_type_id == 1"> <div class="panel panel-default" ng-repeat="questionName in questionArray"> <div class="panel-heading"> {{questionName.question}} </div> <div class="panel-body"> <div class="anser-options" ng-repeat="question in questionName.question_answer_options"> <label class="rad"> <input type="radio" name="value{{questionName.id}}" value="{{question.option}}" ng-model="questionName.exam_answer.user_answer" ng-click="choosedAnswer(questionName.id, question.option)" id="checkbox{{$index}}"> {{question.option}} </label> </div> </div> </div> </div> <p class="hor-space alert alert-info text-left text-center">{{\'By clicking answer, system will auto save your answers\' | translate}}.</p> <div class="panel-heading text-right"> <button class="btn btn-primary bot-mspace" ng-click="submit()" name="continue">{{\'Complete this skill test\' | translate}}</button> </div> </div> <div ng-show="exam_data.exam_status_id == 4"> <p class="hor-space alert alert-info text-left">{{\'Exam Already attend\'|translate}}</p> </div> </div> <div class="container" ng-if="exam_data.user_id != user.id && accessTimeOut"> <div class="row"> <p class="hor-space alert alert-info text-left">{{\'Access Denied\' | translate}}</p> </div> </div> </div>'),$templateCache.put("scripts/plugins/Bidding/Exam/views/default/exam_payment.html",'<div class="section photo-view"> <div class="container"> <div> <div class="clearfix"> <h2 class="panel-title text-22 bot-15-mspace head-bot">{{\'Exam fee for\' | translate}} {{examValue.title}}</h2> <div class="job-body row"> <div class="col-md-2 bot-space"> <img ng-src="{{examValue.logo_url}}" class="img-responsive center-block"> </div> <div class="col-md-6"> <div class="col-xs-12"> <div class="job-info navbar-btn"> <ul class="list-unstyled"> <li> <p class="row"> <span class="col-sm-3 col-xs-4">{{\'Exam\'|translate}}</span> <span class="col-sm-9 col-xs-6"> {{examValue.title}} </span> </p> </li> <li> <p class="row"> <span class="col-sm-3 col-xs-4">{{\'Exams Level\'|translate}}</span> <span class="col-sm-9 col-xs-6"> {{examValue.exam_level.name}} </span> </p> </li> <li> <p class="row"> <span class="col-sm-3 col-xs-4">{{\'Questions\'|translate}}</span> <span class="col-sm-9 col-xs-6"> {{examValue.exams_question_count}}</span> </p> </li> <li> <p class="row"> <span class="col-sm-3 col-xs-4">{{\'Duration\'|translate}}</span> <span class="col-sm-9 col-xs-6"> {{examValue.duration}}</span> </p> </li> <li> <p class="row"> <span class="col-sm-3 col-xs-4">{{\'To pass\'|translate}}</span> <span class="col-sm-9 col-xs-6"> {{examValue.pass_mark_percentage}}%</span> </p> </li> </ul> </div> </div> </div> </div> </div> </div> <br>  <div class="row"> <div class="modal-header"> <h3>{{\'Select Payment Type\' | translate}}</h3> </div> <div class="modal-body"> <div class=""> <div class=""> <div class="clearfix"> <form name="PaymentForm" role="form" ng-submit="PaymentFormSubmit(PaymentForm.$valid)"> <div class="panel navbar-btn clearfix"> <div class="panel-body col-xs-12">   <div class="col-xs-12 text-center navbar-btn"> <p class="text-22 textb" ng-show="quote_request_views_detail.quote_amount && show_discount"> {{"Price" | translate }} <amount-display amount="{{quote_request_views_detail.quote_amount}}" ng-if="quote_request_views_detail.quote_amount"></amount-display> </p> <p class="text-22 textb" ng-show="show_discount"> {{"Coupon discount" | translate}} {{show_discount}}</p> <p class="text-22 textb" ng-if="examValue.fee"> {{"You have to pay" | translate }} <span>{{examValue.fee |customCurrency}}</span> </p> </div> </div> <div ng-include="\'views/gateway.html\'" class="col-xs-12"></div> </div> </form> </div> </div> </div> </div> </div> </div></div>'),$templateCache.put("scripts/plugins/Bidding/Exam/views/default/exam_result.html",'<div class="section photo-view"> <div class="container" ng-if="exam_data.user_id == user.id"> <div class="row" ng-if="exam_data.exam_status_id == 4"> <h2 class="text-center">{{\'Oops\'|translate}}!! {{"We’re Sorry"|translate}}!!</h2> <h2 class="text-center">{{\'You have failed this level of skill test\'|translate}}.</h2> <h2 class="text-center"> {{\'We appreciate you for participating in the skill test\'|translate}}.</h2> </div> <div class="row" ng-if="exam_data.exam_status_id == 3"> <h2 class="text-center">{{\'Congratulation\'|translate}}!!!!</h2> <h2 class="text-center">{{\'You have passed this level of skill test\'|translate}}.</h2> <h2 class="text-center"> {{\'We appreciate you for participating in the skill test\'|translate}}.</h2> </div> <hr> <div class="row text-center"> <h3>{{exam_data.exam.title}} ({{exam_data.exam.exam_level.name}})</h3> <p>{{\'Your score card\'|translate}}: {{exam_data.total_mark * 10}}% Marks</p> </div> <div class="row text-center"> <a class="text-center btn btn-primary" href="/">{{\'Home\' | translate}}</a> <a class="text-center btn btn-primary" href="users/dashboard">{{\'Dashboard\' | translate}}</a> <a class="text-center btn btn-primary" ui-sref="Exam()">{{\'Skill Labs\' | translate}}</a> <a class="text-center btn btn-warning" href="users/logout">{{\'Logout\' | translate}}</a> </div> </div> <div class="container" ng-if="exam_data.user_id != user.id && accessTimeOut"> <div class="row"> <p class="hor-space alert alert-info text-left">{{\'Access Denied\' | translate}}</p> </div> </div> </div>'),
$templateCache.put("scripts/plugins/Bidding/Exam/views/default/exam_start.html",'<div class="section photo-view"> <div class="container"> <h2 class="head-bot">{{\'Test Your Skill -\'|translate}} {{exam_start.exam.title}}</h2> <div> <h4>{{exam_start.exam.exam_level.name}}</h4> <p class="hor-space alert alert-info text-left text-center">{{\'Please read the below instructions before start your skill test\' | translate}}.</p> </div> <div> <div class="panel-heading"> <p ng-bind-html="str"></p> </div> </div> <div class="panel-heading text-right"> <button class="btn btn-primary bot-mspace" name="continue" ng-click="examStart(exam_start.id)">{{\'Continue\' | translate}}</button> </div> </div> </div>'),$templateCache.put("scripts/plugins/Bidding/Exam/views/default/exam_view.html",'<div class="section photo-view binding-freelancer exams" ng-if="show_response_page"> <div class="container"> <div class="row"> <br> <div class="clearfix"> <div class="clearfix bot-20-mar col-md-12">  <h2 class="panel-title text-22 head-bot">{{examValue.title}}</h2> </div> <div class="job-body"> <div class="row" ng-if="examValue.ExamsUser[0].exam_status_id == 4 && examValue.ExamsUser[0].exam_status_id == 3"> <p class="hor-space alert alert-info text-left">{{\'Already you attend this exam\' | translate}}</p> </div> <div class="col-sm-2 bot-mspace"> <img ng-src="{{examValue.logo_url}}" class="img-responsive center-block" src="{{examValue.logo_url}}"> </div> <div class="col-sm-6 clearfix"> <div class="job-info"> <ul class="list-unstyled"> <li> <p class="row"> <span class="col-sm-3 col-xs-4">{{\'Exams Level\'|translate}}</span> <span class="col-sm-9 col-xs-4"> {{examValue.exam_level.name}} </span> </p> </li> <li> <p class="row"> <span class="col-sm-3 col-xs-4">{{\'Questions\'|translate}}</span> <span class="col-sm-9 col-xs-4"> {{examValue.exams_question_count}}</span> </p> </li> <li> <p class="row"> <span class="col-sm-3 col-xs-4">{{\'Duration\'|translate}}</span> <span class="col-sm-9 col-xs-4"> {{examValue.duration}}</span> </p> </li> <li> <p class="row"> <span class="col-sm-3 col-xs-4">{{\'To pass\'|translate}}</span> <span class="col-sm-9 col-xs-4"> {{examValue.pass_mark_percentage}}% </span> </p> </li> </ul> </div> </div> <div class="col-sm-4 center"> <div class="panel-body no-pad" ng-if="isAuth"> <div ng-show="examValue.fee > 0"> <span class="text-center text-22">${{examValue.fee}}</span> <span>{{\'is required to take this skills test\' | translate}}.</span> </div> <div ng-show="examValue.fee == 0"> <span>{{\'This Skill Test Is Free\' | translate}}.</span> </div> <div class="top-mar"> <div ng-if="passedCount >= 1"> <p class="alert alert-success text-center no-mar">{{\'You Already Taken and Got Passed this Exam\'| translate}}.</p> </div> <div ng-if="Inprogress >= 1" class="top-mspace-10"> <p class="hor-space alert alert-success text-center text-success">{{\'This skill start is already started/inprocess status right now\' | translate}}</p> <div ng-if="settings[\'IS_ALLOW_TO_RECONTINUE_SKILL_TEST\'] && (settings[\'MAX_NUMBER_OF_TIME_USER_CAN_RECONTINUE\'] == \'\' || settings[\'MAX_NUMBER_OF_TIME_USER_CAN_RECONTINUE\'] >= examAttempts)"> <span> <a class="text-center btn btn-primary" ng-if="Inprogress >= 1 || Incomplete >= 1" ui-sref="ExamStart({id:examValue.ExamsUser[0].id})">{{\'Resume Now\' | translate }}</a></span> </div> </div> <div ng-if="FeePaidOrNotStarted >= 1"> <div ng-show="examValue.fee > 0"> <p class="hor-space alert alert-success text-center text-success">{{\'You have already paid this skill test and yet to start\'| translate}}.</p> <span> <a class="text-center btn btn-primary" ui-sref="ExamStart({id:examValue.ExamsUser[0].id})" title="Start Your Skill Test Now">{{\'Start Your Skill Test Now\'|translate}}</a> </span> </div> </div> <div ng-if="(Failed + Incomplete + SuspendedDueToTakingOvertime) >= 1" class="top-mspace-10"> <p class="hor-space alert alert-success text-center text-success">{{\'You already tried this exam\'| translate}} {{(Failed + Incomplete + SuspendedDueToTakingOvertime)}} {{\'times\' | translate}}.</p> <div ng-if="(Failed + Incomplete + SuspendedDueToTakingOvertime) > settings[\'MAX_NUMBER_OF_TIME_PER_USER_PER_EXAM\']"> <div ng-if="settings[\'IS_FEE_NEEDED_FOR_RERATTEMPTS\'] && examValue.fee > 0"> <span class="text-center text-22">${{examValue.fee}}</span> <span>{{\'is required to take this skills test\' | translate}}.</span> <span> <a class="text-center btn btn-primary" ng-click="exam_users(examValue.id)" title="Start Your Skill Test Now">{{\'Retry Skill Test Now\' | translate}}</a> </span> </div> <div ng-if="settings[\'IS_FEE_NEEDED_FOR_RERATTEMPTS\'] && examValue.fee = 0"> <span> <a class="text-center btn btn-primary" ui-sref="ExamStart({id:examValue.ExamsUser[0].id})" title="Start Your Skill Test Now">{{\'Retry Skill Test Now\' | translate}}</a> </span> </div> </div> </div> <div ng-if="settings[\'IS_ENABLED_HIERARCHY_LEVEL_ATTENDING_EXAM\'] > 0"> <div ng-if="parentpassCount >= 1"> <div ng-if="settings[\'IS_FEE_NEEDED_FOR_RERATTEMPTS\'] && examValue.fee > 0"> <span class="text-center text-22">${{examValue.fee}}</span> <span>{{\'is required to take this skills test\' | translate}}.</span> <span> <a class="text-center btn btn-primary" ng-click="exam_users(examValue.id)" title="Start Your Skill Test Now">{{\'Test Your Skills\' | translate}}</a> </span> </div> <div ng-if="settings[\'IS_FEE_NEEDED_FOR_RERATTEMPTS\'] && examValue.fee == 0"> <span> <a class="text-center btn btn-primary" ui-sref="ExamStart({id:examValue.ExamsUser[0].id})" title="Start Your Skill Test Now">{{\'Test Your Skills\' | translate}}</a> </span> </div> </div> <div ng-if="parentpassCount == 0"> <p class="hor-space alert alert-success text-center text-success">{{\'You must complete the exam in order of difficulty. So please complete\'| translate}} {{examValue.parent[0].title}} {{\'Level\' | translate}} {{examValue.parent[0].exam_level_id}} {{\'before trying\' | translate }} {{examValue.title}} {{\'Level\' | translate}} {{examValue.exam_level_id}} {{\'test\' | translate}}</p> </div> </div> <a class="text-center btn btn-primary top-mspace-10" ng-click="exam_users(examValue.id)" title="Test Your Skills">{{\'Test Your Skills\' | translate}}</a> </div>  </div> <div class="panel-body" ng-if="!isAuth"> <span class="text-center">${{examValue.fee}}</span><br> <span>{{\'is required to take this skills test\' | translate}}.</span> <span> <a class="text-center btn btn-primary" ng-click="openLoginModal(\'login\')" title="Test Your Skills">{{\'Test Your Skills\'|translate}}</a> </span> </div> <div class="top-mar"> <a class="text-center btn btn-default" ui-sref="Exam()" title="Back To Skills Lab">{{\'Back To Skills Lab\'|translate}}</a> <span class="featured" ng-show="examValue.is_featured == 1">{{\'Featured\'|translate}}</span> </div> </div>  </div> </div> <br> <div class="col-md-12"> <h3 class="panel-title text-18 bottom-mar-5">{{\'Topics Covered\' | translate}}</h3> <div> <p ng-bind-html="topics_covered"></p> </div> <br> </div> <div class="col-md-12"> <h3 class="panel-title text-18 bottom-mar-5">{{\'Instructions\' | translate}}</h3> <div> <p ng-bind-html="str"></p> </div> <br> </div> </div> </div> </div>'),$templateCache.put("scripts/plugins/Bidding/Exam/views/default/exams.html",'<div class="section photo-view skill-tests" ng-controller="ExamListCtrl"> <div class="container"> <h3 class="panel-title text-22 pull-left bot-space">{{\'Search Skill Tests\' | translate}}</h3> <div class="clearfix"> <div class="pull-right"> <div class="form-group label-frm"> <form class="form-inline" role="form" name="ExamsearchForm"> <div class="input-group"> <input type="text" class="form-control" ng-model="params.q" placeholder="Search Exams"> <span class="input-group-btn"> <button type="submit" ng-click="refinesearch(params.q)" class="btn btn-primary"><i class="fa fa-search"></i></button> </span> </div> </form> </div> </div> </div> <ul class="row list-inline"> <li class="col-sm-4" ng-repeat="examsValue in exams" ng-class="{\'featured\':examsValue.is_featured == 1}"> <div class="media"> <div class="pull-left exams-img"> <img ng-src="{{examsValue.logo_url}}" alt="{{examsValue.title}}"> </div> <div class="media-body"> <a class="cursor" ui-sref="ExamView({id:examsValue.id , slug:examsValue.slug})">{{examsValue.title}}</a> ({{examsValue.exam_level.name}}) <p class="top-mspace-5 text-12">{{examsValue.exams_question_count}} {{\'Questions\'|translate}}<span class="left-space">{{examsValue.duration}} mins</span></p> </div> </div> </li> </ul> <div class="text-center bot-space" ng-if="exams.length <= 0"> <span class="text-danger">{{\'No records Found\' | translate}}</span> </div> <div class="row binding-pagination bot-mspace"> <div class="pagnation-content"> <div class="container"> <div class="clearfix pagnation-inner"> <div class="row"> <div class="col-md-12 text-center"> <uib-pagination total-items="totalItems" max-size="maxSize" items-per-page="itemsPerPage" ng-model="currentPage" class="pagination-sm" boundary-links="true" num-pages="numPages" num-pages="noOfPages" ng-click="paginate()"></uib-pagination> </div> </div> </div> </div> </div> </div> </div> </div>'),$templateCache.put("scripts/plugins/Bidding/Exam/views/default/my_exams.html",'<div class="section photo-view"> <div class="container"> <div class="row"> <div class="col-md-12"> <div class="col-md-8"> <h2>Skill Test Attempts</h2> </div> <div class="col-md-4 pull-right"> <a class="text-center btn btn-primary" ng-click="filter(3)">{{\'View All Certificate\' | translate}}</a> <a class="text-center btn btn-primary" ng-click="filter(4)">{{\'View All Attempts\' | translate}}</a> </div> </div> </div> <div class="row"> <div class="col-md-12"> <table ng-if="myExams.length > 0" class="table table-striped sep table-inner ver-mspace table-bordered"> <thead> <tr> <th class="col-md-4"> <label> Exam </label> </th> <th class="col-md-4"> <label> Date </label> </th> <th class="col-md-4"> <label> Taken Mark </label> </th> <th class="col-md-4"> <label> Result </label> </th> </tr> </thead> <tbody> <tr ng-repeat="myExam in myExams"> <td>{{myExam.exam.title}}</td> <td>{{myExam.exam_status.created_at}}</td> <td>{{myExam.total_mark}}</td> <td>{{myExam.exam_status.name}}</td> </tr> </tbody> </table> <div ng-if="myExams.length == 0"> <p class="hor-space alert alert-info text-left">{{\'No exams are found\' | translate}}</p> </div> </div> </div> </div> </div>')}]);